<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="config.js"></script>
    <title>Flight Search</title>
    <style>
        /* Style for autocomplete dropdown */
        .pac-container {
            z-index: 10000; /* Ensure autocomplete dropdown is displayed above other elements */
        }
    </style>

    <script>  var API_KEY = config.API_KEY;
 
        // Construct the Google Maps API script URL with the API_KEY variable
        var scriptUrl = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places`;

        // Create a new script element
        var scriptElement = document.createElement('script');

        // Set the src attribute of the script element to the constructed URL
        scriptElement.src = scriptUrl;

        // Append the script element to the document's head to load the Google Maps API
        document.head.appendChild(scriptElement);</script>
</head>
<body>
    <form id="flightSearchForm">
        <label for="origin">Origin Airport:</label>
        <input type="text" id="origin" name="origin" required autocomplete="off">
    
        <label for="destination">Destination Airport:</label>
        <input type="text" id="destination" name="destination" required autocomplete="off">
    
        <label for="departDate">Departure Date:</label>
        <input type="date" id="departDate" name="departDate" required>
    
        <label for="returnDate">Return Date:</label>
        <input type="date" id="returnDate" name="returnDate" required>
    
        <button type="submit">Search Flights</button>
    </form>
    
    <div id="flightResults"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>

        
        $(document).ready(function() {

            // Initialize Google Places Autocomplete for origin and destination inputs
            var originInput = document.getElementById('origin');
            var destinationInput = document.getElementById('destination');
    
            new google.maps.places.Autocomplete(originInput);
            new google.maps.places.Autocomplete(destinationInput);

            $('#flightSearchForm').submit(function(event) {
                event.preventDefault(); // Prevent default form submission
                var origin = $('#origin').val();
                var destination = $('#destination').val();
                var departDate = $('#departDate').val();
                var returnDate = $('#returnDate').val();
                var passengers = $('#passengers').val();

                // Construct the Google Flights URL with the form data
                var googleFlightsUrl = 'https://www.google.com/flights?'
                    + 'q=' + origin + '+to+' + destination
                    + '&d=' + departDate
                    + '&r=' + returnDate
                    + '&s=' + passengers;

                // Open the Google Flights URL in a new tab
                window.open(googleFlightsUrl, '_blank');
            });
        });
    </script>
</body>
</html>