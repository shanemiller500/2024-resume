<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground 1</title>
    <style>
        /* Add CSS styles for the map container */
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="map" style="width: 100%; height: 400px;"></div>
    <input type="text" id="searchInput" placeholder="Enter location">
    <button id="searchBtn">Search</button>
    <div id="address"></div>
    <div id="photos"></div>
    <div id="golfResults"></div>
    <div id="Kid"></div>
    <div id="bar"></div>
    <!-- Include jQuery and Google Maps API -->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBFl8tnrZlEdpDty7PevwDq-MWrFA26QKg&libraries=places"></script>
    <script>
        $(document).ready(function () {
            // Initialize Google Places Autocomplete
            var input = document.getElementById('searchInput');
            var autocomplete = new google.maps.places.Autocomplete(input);

            // When the search button is clicked
            $('#searchBtn').click(function () {
                var userInput = $('#searchInput').val(); // Get the user input from the search input field

                // Make an AJAX request to the Google Maps Geocoding API
                $.ajax({
                    url: 'https://maps.googleapis.com/maps/api/geocode/json',
                    method: 'GET',
                    data: {
                        address: userInput,
                        key: 'AIzaSyBFl8tnrZlEdpDty7PevwDq-MWrFA26QKg'
                    },
                    success: function (response) {
                        // If the API returns results
                        if (response.results && response.results.length > 0) {
                            var formattedAddress = response.results[0].formatted_address; // Get the formatted address from the API response
                            $('#address').html('<p> Address: ' + formattedAddress + '</p>'); // Display the formatted address

                            // Display a map centered at the location from the API response
                            var map = new google.maps.Map(document.getElementById('map'), {
                                center: { lat: response.results[0].geometry.location.lat, lng: response.results[0].geometry.location.lng },
                                zoom: 15
                            });

                            // Add a marker to the map at the location from the API response
                            var marker = new google.maps.Marker({
                                position: { lat: response.results[0].geometry.location.lat, lng: response.results[0].geometry.location.lng },
                                map: map,
                                title: formattedAddress
                            });

                            // Get photos of the location using the Place ID from the API response
                            var placeId = response.results[0].place_id;
                            var photoService = new google.maps.places.PlacesService(map);
                            photoService.getDetails({ placeId: placeId }, function (place, status) {
                                if (status === google.maps.places.PlacesServiceStatus.OK && place.photos && place.photos.length > 0) {
                                    // If photos are found, display them
                                    var photosHtml = '<div id="photosContainer">';
                                    place.photos.forEach(function (photo) {
                                        photosHtml += '<img src="' + photo.getUrl({ maxWidth: 200, maxHeight: 200 }) + '" alt="Photo">';
                                    });
                                    photosHtml += '</div>';
                                    $('#photos').html(photosHtml);
                                } else {
                                    // If no photos are found, display a message
                                    $('#photos').html('<p>No photos found for the location.</p>');
                                }
                            });

                            // Perform a Places Search API request to find bars near the location
                            var placesService = new google.maps.places.PlacesService(map);
                            placesService.nearbySearch({
                                location: { lat: response.results[0].geometry.location.lat, lng: response.results[0].geometry.location.lng },
                                radius: 5000, // Search radius in meters (adjust as needed)
                                type: 'bar' // Search specifically for bars
                            }, function (results, status) {
                                if (status === google.maps.places.PlacesServiceStatus.OK) {
                                    // Display information about the top 10 bars, including ratings, address, website, phone number, and an image
                                    $('#bar').append('<h3>Top 10 Bars:</h3>');
                                    for (var i = 0; i < Math.min(results.length, 10); i++) {
                                        var place = results[i];
                                        var photosHtml = '';
                                        if (place.photos && place.photos.length > 0) {
                                            photosHtml += '<img src="' + place.photos[0].getUrl({ maxWidth: 200, maxHeight: 200 }) + '" alt="Photo">';
                                        } else {
                                            photosHtml += '<p>No photo available</p>';
                                        }
                                        var address = place.vicinity ? '<p>Address: ' + place.vicinity + '</p>' : '';
                                        var website = place.website ? '<p>Website: <a href="' + place.website + '" target="_blank">' + place.website + '</a></p>' : '';
                                        var phone = place.formatted_phone_number ? '<p>Phone: ' + place.formatted_phone_number + '</p>' : '';
                                        $('#bar').append('<div><p>' + place.name + ' - Rating: ' + place.rating + '</p>' + address + website + phone + photosHtml + '</div>');
                                    }
                                } else {
                                    $('#bar').append('<p>No bars found nearby.</p>');
                                }
                            });

                            // Perform a Places Search API request to find top golf courses near the location
                            var placesService = new google.maps.places.PlacesService(map);
                            placesService.nearbySearch({
                                location: { lat: response.results[0].geometry.location.lat, lng: response.results[0].geometry.location.lng },
                                radius: 5000, // Search radius in meters (adjust as needed)
                                keyword: 'golf course', // Search specifically for golf courses
                                rankBy: google.maps.places.RankBy.PROMINENCE // Rank by prominence to get top results
                            }, function (results, status) {
                                if (status === google.maps.places.PlacesServiceStatus.OK) {
                                    // Display information about the top golf courses, including ratings and one photo
                                    $('#golfResults').append('<h3>Top Golf Courses:</h3>');
                                    for (var i = 0; i < Math.min(results.length, 10); i++) {
                                        var place = results[i];
                                        var photosHtml = '';
                                        if (place.photos && place.photos.length > 0) {
                                            photosHtml += '<img src="' + place.photos[0].getUrl({ maxWidth: 200, maxHeight: 200 }) + '" alt="Photo">';
                                        } else {
                                            photosHtml += '<p>No photo available</p>';
                                        }
                                        $('#golfResults').append('<div><p>' + place.name + ' - Rating: ' + place.rating + '</p>' + photosHtml + '</div>');
                                    }
                                } else {
                                    $('#golfResults').append('<p>No golf courses found nearby.</p>');
                                }
                            });


                            // Perform a Places Search API request to find kids' activities near the location
                            var placesService = new google.maps.places.PlacesService(map);
                            placesService.nearbySearch({
                                location: { lat: response.results[0].geometry.location.lat, lng: response.results[0].geometry.location.lng },
                                radius: 5000, // Search radius in meters (adjust as needed)
                                keyword: 'kids activities', // Search specifically for kids' activities
                                rankBy: google.maps.places.RankBy.PROMINENCE // Rank by prominence to get top results
                            }, function (results, status) {
                                if (status === google.maps.places.PlacesServiceStatus.OK) {
                                    // Display information about the top 10 kids' activities, including ratings, photos, and address
                                    $('#Kid').append('<h3>Top 10 Kids Activities:</h3>');
                                    for (var i = 0; i < Math.min(results.length, 10); i++) {
                                        var place = results[i];
                                        var photosHtml = '';
                                        if (place.photos && place.photos.length > 0) {
                                            photosHtml += '<img src="' + place.photos[0].getUrl({ maxWidth: 200, maxHeight: 200 }) + '" alt="Photo">';
                                        } else {
                                            photosHtml += '<p>No photo available</p>';
                                        }
                                        var address = place.vicinity ? '<p>Address: ' + place.vicinity + '</p>' : '';
                                        var rating = place.rating ? '<p>Rating: ' + place.rating + '</p>' : '';
                                        $('#Kid').append('<div><p>' + place.name + '</p>' + rating + address + photosHtml + '</div>');
                                    }
                                } else {
                                    $('#Kid').append('<p>No kids activities found nearby.</p>');
                                }
                            });

                        } else {
                            // If no results are returned from the API, display a message
                            $('#address').html('<p>No address found for the input.</p>');
                        }
                    },
                    error: function () {
                        // If there is an error fetching data from the API, display an error message
                        $('#address').html('<p>Error fetching data from Google Maps API.</p>');
                    }

                });
            });
        });
    </script>
</body>

</html>